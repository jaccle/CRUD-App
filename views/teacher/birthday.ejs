<% layout('students/boilerplate') -%>
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-3"></div>
            <div class="col-sm-6">
                <div class="panel panel-primary">
                    <!-- Default panel contents -->
                    <div class="panel-heading"><span class="glyphicon glyphicon-gift" aria-hidden="true"> Birthdays!</div>

  <!-- Table -->
  
                <table class="table table-striped sortable">
                    <thead>
                        <tr>
                            <th>First Name</th>
                            <th>Last Name</th>
                            <th>Birthday</th>
                        </tr>
                    </thead>
                    <script>
                        var count = 0;
                    </script>
                        <% teacher.students.forEach(function (student) { %>
                        <tr>
                        <% if (student.nickName !== '') { %>
                            <td><%= student.nickName %></td>
                        <% } else { %>
                            <td><%= student.firstName %></td>
                        <% } %>
                            <td><%= student.lastName %></td>

                            <td class="birthday" id="temp"><%= student.birthday %></td>
                            <script>
                            //first sort by month number to order
                                count ++;
                                var month = ['months', 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
                                document.getElementById('temp').id = count;
                                var birthday = document.getElementById(count).innerText;
                                birthday = birthday.toString().split('-');
                                var date = new Date();
                                var year = date.getFullYear();
                                var age = year-parseInt(birthday[0]);
                                console.log(month[birthday[1]]);
                                birthday = month[parseInt(birthday[1])]+' '+ birthday[2] + ' (age '+ age +')';
                                document.getElementById(count).innerText = birthday;
                            </script>
                        </tr>
                      <% }) %>
                </table>
            </div>
            <div class="col-sm-3"></div>
        </div>
    </div>
</div>

